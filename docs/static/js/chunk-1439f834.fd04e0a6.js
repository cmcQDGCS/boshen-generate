(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1439f834"],{"21a6":function(t,e,n){(function(n){var a,i,o;(function(n,c){i=[],a=c,o="function"===typeof a?a.apply(e,i):a,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function a(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){s(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,r=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(t,e,n){var r=c.URL||c.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?o(s):i(s.href)?a(t,e,n):o(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,c){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,c),n);else if(i(t))a(t,n,c);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){o(r)}))}}:function(t,e,n,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,n);var o="application/octet-stream"===t.type,s=/constructor/i.test(c.HTMLElement)||c.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var p=c.URL||c.webkitURL,f=p.createObjectURL(t);i?i.location=f:location.href=f,i=null,setTimeout((function(){p.revokeObjectURL(f)}),4e4)}});c.saveAs=s.saveAs=s,t.exports=s}))}).call(this,n("c8ba"))},2581:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview"},[n("header",{staticClass:"preview-header"},[n("Button",{on:{click:t.exportCode}},[t._v("导出源码")])],1),n("drop-container",{staticClass:"panel-wrap",attrs:{"is-preview":"",panel:{_id:-1},activePanel:{},"panel-list":t.config.panels},nativeOn:{mousemove:function(t){t.stopPropagation()}}})],1)},i=[],o=(n("159b"),n("98b3")),c=n("5530"),r=n("d4ec"),s=n("bee2"),l=(n("4d63"),n("ac1f"),n("25f0"),n("7db0"),n("5319"),n("5a0c")),u=n.n(l),p=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b64b"),n("1276"),n("99af"),n("a9e3"),n("fb6a"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r["a"])(this,t),this.init(e)}return Object(s["a"])(t,[{key:"init",value:function(t){this.ast=t,this.code={data:{},methods:{}},this.variable=new Map}},{key:"setChild",value:function(t){var e="";if(t&&t.length){var n=0;while(n<t.length)e+=this.setTemplate(t[n])+"\n",n++}return e}},{key:"setTemplate",value:function(t){var e=this;if(t){var n="";return Object.keys(t.attrs).forEach((function(a){var i=e.variable.get(a);if(i){var o=i.split("_");i="".concat(o[0],"_").concat(Number(o[1])+1)}else i="".concat(t.componentName[0].toLowerCase()).concat(t.componentName.slice(1)).concat(a[0].toUpperCase()).concat(a.slice(1),"_1");e.variable.set(a,i),n+=":".concat(a,'="').concat(i,'" '),e.code.data[i]=t.attrs[a]})),"<".concat(t.componentName||t.tag).concat(this.countStyle(t.style)).concat(n.length<1?"":" "+n.slice(0,-1)).concat(t.className?' class="'+t.className+'"':"",">\n    ").concat(this.setChild(t.children),"\n  </").concat(t.componentName||t.tag,">")}return""}},{key:"setJavascript",value:function(){return"<script>\n  \n  export default {\n    name: 'exportCode',\n    data () {\n      return ".concat(Object.keys(this.code.data).length<1?"{}":JSON.stringify(this.code.data),"\n    },\n    computed: {\n    },\n    watch: {\n  \n    },\n    methods: ").concat(Object.keys(this.code.methods).length<1?"{}":JSON.stringify(this.code.methods),"\n  }\n  <\/script>")}},{key:"setCss",value:function(){return'<style scoped lang="less">\n  </style>'}},{key:"countStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="";for(var n in t)e+="".concat(n,"=").concat(t[n]," ");return e.length<1?"":' style="'.concat(e.slice(0,-1),'"')}},{key:"replace",value:function(t){return this.init(t),"<template>\n    ".concat(this.setTemplate(this.ast),"\n  </template>\n  \n  ").concat(this.setJavascript(),"\n  \n  ").concat(this.setCss())}}]),t}()),f=p,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r["a"])(this,t),this.init(e)}return Object(s["a"])(t,[{key:"init",value:function(t){this.ast=t,this.code={data:{},methods:{}},this.variable=new Map}},{key:"replace",value:function(t){return this.init(t),""}}]),t}(),h=d,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r["a"])(this,t),this.init(e)}return Object(s["a"])(t,[{key:"init",value:function(t){this.ast=t,this.code={data:{},methods:{}},this.variable=new Map}},{key:"replace",value:function(t){return this.init(t),""}}]),t}(),m=v,y=n("788d"),b=n("3e8f"),w=n("21a6"),g=new RegExp("^[A-z]:\\\\(.+?\\\\)*$"),k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sourceCode,a=e.exportType;if(Object(r["a"])(this,t),"object"!==y["a"].typeOf(n))throw new Error("sourceCode 必须为 Object类型");this.init(n,a)}return Object(s["a"])(t,[{key:"init",value:function(t,e){var n=this;this.typeArr=["vue","react","angular"],this._ast={},this.type=e,this.typeArr.find((function(t){return t===n.type}))?(this.codeReplace={vue:new f,react:new h,angular:new m},this.code=g.test(t)?b.readFileSync(t,"utf8",{}):t,this._ast=this.toAst()):console.error(new Error("请传递对应类型进行导出"))}},{key:"toAst",value:function(){var t=this.code,e=t.panels,n=t.currencyConfig;if(!this.code._compile&&e&&n){var a={_compile:!0,tag:"div",children:[],attrs:{},className:["code-wrap"],style:{}};return n.AttributePanel.forEach((function(t){a.style[t.key]=t.attrs.value})),o(this.code.panels,a),a}function i(t){return{style:{}}}function o(t,e){t&&t.forEach((function(t){var n=Object(c["a"])({_id:t._id,tag:!t.componentName||"div",attrs:t._attrs,componentName:t.componentName,children:[]},i(t.config));e.children.push(n),t.children&&o(t.children,n)}))}}},{key:"export",value:function(t){var e=this.codeReplace[this.type].replace(this._ast),n=t||"".concat(u()().format("YYYY-MM-DD HH:mm:ss"),".vue");w.saveAs(new Blob([e],{type:"text/plain;charset=utf-8"}),n)}}]),t}(),O=k,j=n("f7aa"),E=JSON.parse(Object(o["b"])("userConfig")),_=new O({exportType:"vue",sourceCode:E||{}}),C={name:"Preview",components:{DropContainer:j["a"]},data:function(){return{config:{}}},computed:{wrapStyle:function(){var t={};return this.config.currencyConfig.AttributePanel.forEach((function(e){t[e.key]=e.attrs.value})),t}},watch:{},created:function(){this.config=E||{panels:[],currencyConfig:{}}},mounted:function(){},methods:{exportCode:function(){_.export()}}},A=C,L=(n("3c61"),n("2877")),x=Object(L["a"])(A,a,i,!1,null,"7919b6d3",null);e["default"]=x.exports},"2d08":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var a="undefined"===typeof window,i=function(){return!a&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),o=function(){return!a&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}()},"3c61":function(t,e,n){"use strict";n("41b1")},"3e8f":function(t,e){},"41b1":function(t,e,n){},"8d91":function(t,e,n){},bee2:function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.d(e,"a",(function(){return i}))},d4ec:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return a}))},da23:function(t,e,n){"use strict";n("8d91")},f7aa:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"container",staticClass:"container-wrap panel-items"},[t._l(t.panelList,(function(e){return n("li",{key:e._id,class:t.countClass(e),on:{click:function(n){return n.stopPropagation(),t.emitActivePanel(e)}}},[e.children?n("drop-container",{attrs:{stack:t.stack,panel:e,"active-panel":t.activePanel,"common-data":t.commonData,"panel-list":e.children}}):n(e.componentName,t._b({tag:"component"},"component",e._attrs,!1)),e._id===t.activePanel._id?n("div",{staticClass:"empty tool-wrap",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"tool-btns"},t._l(t.panelBtn,(function(a){return n("Tooltip",{key:a.key,attrs:{content:a.label,placement:"bottom"}},[n("Icon",{attrs:{type:a.icon},on:{click:function(n){return t.operation(a.key,e)}}})],1)})),1)]):t._e(),n("div",{staticClass:"empty empty-wrap"})],1)})),t.panelList.length<1?n("li",{staticClass:"empty-contet panel-items"},[t._v(" 请拖入组件 "),n("div",{staticClass:"empty empty-wrap"})]):t._e()],2)},i=[],o=(n("dca8"),n("b0c0"),n("2d08")),c={name:"DropContainer",props:{isPreview:Boolean,panel:Object,activePanel:Object,panelList:Array,stack:Array,commonData:{type:Object,default:function(){return{hoverStack:[]}}}},data:function(){return{panelBtn:Object.freeze([{label:"复制",icon:"icon-new",key:"copy"},{label:"删除",icon:"icon-delete",key:"delete"}]),hoverStack:this.commonData.hoverStack}},computed:{wrap:function(){return this.$refs.container}},watch:{},created:function(){},mounted:function(){this.isPreview||(Object(o["b"])(this.wrap,"mouseenter",this.enterWrap),Object(o["b"])(this.wrap,"mouseleave",this.leaveWrap))},destroyed:function(){this.isPreview||(Object(o["a"])(this.wrap,"mouseenter",this.enterWrap),Object(o["a"])(this.wrap,"mouseleave",this.leaveWrap))},methods:{countClass:function(t){return["panel-item","panel-items",{"panel-item-active":t._id===this.activePanel._id,"panel-item-empty":t.children&&t.children.length<1}]},emitEvent:function(){var t;"CenterPanel"!==this.$parent.$options.name?(t=this.$parent).emitEvent.apply(t,arguments):this.$emit.apply(this,arguments)},enterWrap:function(){this.emitEvent("on-add-stack",{el:this.$el,panel:this.panel})},leaveWrap:function(){this.emitEvent("on-del-stack",this.panel._id)},emitActivePanel:function(t){t._id!==this.activePanel._id&&this.emitEvent("on-change-active",t)},operation:function(t,e){switch(t){case"delete":this.emitEvent("on-delete-panel",e);break;case"copy":this.emitEvent("on-copy-panel",e);break}}}},r=c,s=(n("da23"),n("2877")),l=Object(s["a"])(r,a,i,!1,null,"dd17f110",null);e["a"]=l.exports}}]);